<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>An operating model for building cloud native applications | GitOps</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="GitOps site">
    <meta name="theme-color" content="#ff944d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/gitops/assets/css/0.styles.7f9f9372.css" as="style"><link rel="preload" href="/gitops/assets/js/app.64914ed5.js" as="script"><link rel="preload" href="/gitops/assets/js/2.813d8e15.js" as="script"><link rel="preload" href="/gitops/assets/js/15.6e208b1e.js" as="script"><link rel="preload" href="/gitops/assets/js/7.30b52d8b.js" as="script"><link rel="prefetch" href="/gitops/assets/js/10.584105a0.js"><link rel="prefetch" href="/gitops/assets/js/11.5f08eb2d.js"><link rel="prefetch" href="/gitops/assets/js/12.d82153ed.js"><link rel="prefetch" href="/gitops/assets/js/13.a64c0d1b.js"><link rel="prefetch" href="/gitops/assets/js/14.e21bef8a.js"><link rel="prefetch" href="/gitops/assets/js/16.9ee072e8.js"><link rel="prefetch" href="/gitops/assets/js/17.890d1237.js"><link rel="prefetch" href="/gitops/assets/js/18.1aa4adc2.js"><link rel="prefetch" href="/gitops/assets/js/19.aed35550.js"><link rel="prefetch" href="/gitops/assets/js/20.cfb0ecb4.js"><link rel="prefetch" href="/gitops/assets/js/3.87cdbeb1.js"><link rel="prefetch" href="/gitops/assets/js/4.196fd8c0.js"><link rel="prefetch" href="/gitops/assets/js/5.037c1135.js"><link rel="prefetch" href="/gitops/assets/js/6.b4367a95.js"><link rel="prefetch" href="/gitops/assets/js/8.b99a89df.js"><link rel="prefetch" href="/gitops/assets/js/9.29d3ac98.js">
    <link rel="stylesheet" href="/gitops/assets/css/0.styles.7f9f9372.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/gitops/" class="home-link router-link-active"><img src="/gitops/logo.png" alt="GitOps" class="logo"> <span class="site-name can-hide">GitOps</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/gitops/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/gitops/cloudn/" class="nav-link">
  Cloud Native
</a></div><div class="nav-item"><a href="/gitops/iac/" class="nav-link">
  IAC
</a></div><div class="nav-item"><a href="/gitops/tools/" class="nav-link">
  Tools
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/gitops/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/gitops/cloudn/" class="nav-link">
  Cloud Native
</a></div><div class="nav-item"><a href="/gitops/iac/" class="nav-link">
  IAC
</a></div><div class="nav-item"><a href="/gitops/tools/" class="nav-link">
  Tools
</a></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/gitops/guide/" aria-current="page" class="active sidebar-link">An operating model for building cloud native applications</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gitops/guide/#principles" class="sidebar-link">Principles</a></li><li class="sidebar-sub-header"><a href="/gitops/guide/#changes-are-made-via-pull-requests" class="sidebar-link">Changes are made via pull requests</a></li><li class="sidebar-sub-header"><a href="/gitops/guide/#convergence-ensures-eventual-consistency" class="sidebar-link">Convergence ensures eventual consistency</a></li><li class="sidebar-sub-header"><a href="/gitops/guide/#references" class="sidebar-link">References</a></li></ul></li><li><a href="/gitops/guide/devops.html" class="sidebar-link">GitOps vs DevOps</a></li><li><a href="/gitops/guide/pipelines.html" class="sidebar-link">Pipelines</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="an-operating-model-for-building-cloud-native-applications"><a href="#an-operating-model-for-building-cloud-native-applications" class="header-anchor">#</a> An operating model for building cloud native applications</h1> <p>GitOps works by using Git as a single source of truth for declarative infrastructure and applications.</p> <div class="card" data-v-13cd51ee><img src="https://images.contentstack.io/v3/assets/blt300387d93dabf50e/bltccdc2969d11fa365/5b7afd0d1739fa520bbbb0bd/git-diagram.png" width="800" class="imgObj" data-v-13cd51ee> <div class="center" data-v-13cd51ee><p class="caption" data-v-13cd51ee>https://images.contentstack.io/v3/assets/blt300387d93dabf50e/bltccdc2969d11fa365/5b7afd0d1739fa520bbbb0bd/git-diagram.png</p></div></div> <p>With GitOps, the use of software agents can alert on any divergence between Git with what's running in a cluster, and if there's a difference, Kubernetes reconcilers automatically update or rollback the cluster depending on the case.</p> <p>With Git at the center of your delivery pipelines, developers use familiar tools to make pull requests to accelerate and simplify both application deployments and operations tasks to Kubernetes.</p> <h2 id="principles"><a href="#principles" class="header-anchor">#</a> Principles</h2> <h3 id="the-entire-system-described-declaratively"><a href="#the-entire-system-described-declaratively" class="header-anchor">#</a> The entire system described declaratively.</h3> <p>Declarative means that configuration is guaranteed by a set of facts instead of by a set of instructions.</p> <p>With your application’s declarations versioned in Git, you have a <strong>single source of truth.</strong></p> <h3 id="the-canonical-desired-system-state-versioned-in-git"><a href="#the-canonical-desired-system-state-versioned-in-git" class="header-anchor">#</a> The canonical desired system state versioned in Git.</h3> <p>Use a <code>Git revert</code> to go back to your previous application state.</p> <h3 id="approved-changes-that-can-be-automatically-applied-to-the-system"><a href="#approved-changes-that-can-be-automatically-applied-to-the-system" class="header-anchor">#</a> Approved changes that can be automatically applied to the system.</h3> <p>With GitOps, there is a segregated environment of which the state definition lives outside. This allows you to separate what you do and how you're going to do it.
Software agents to ensure correctness and alert on divergence.</p> <h3 id="software-agents-can-inform-you-whenever-reality-doesn-t-match-your-expectations"><a href="#software-agents-can-inform-you-whenever-reality-doesn-t-match-your-expectations" class="header-anchor">#</a> Software agents can inform you whenever reality doesn’t match your expectations.</h3> <p>The use of agents also ensures that your entire system is self-healing. software agents act as the feedback and control loop for your operations.</p> <h2 id="changes-are-made-via-pull-requests"><a href="#changes-are-made-via-pull-requests" class="header-anchor">#</a> Changes are made via pull requests</h2> <p>With GitOps, troubleshooting becomes easier and faster, since we fix a production issue via a pull request rather than tinkering directly with a running system.
If we limit cluster access to a handful of privileged admins, we can apply the same Git workflow to both operations and development.</p> <p>Changes to the application and cluster can then be contained to the following activities:</p> <ul><li><p>Updates to container images</p></li> <li><p>Updates to the declarative specification, or in other words, the desired state</p></li> <li><p>Errors in the environment, like container malfunctions</p></li></ul> <h2 id="convergence-ensures-eventual-consistency"><a href="#convergence-ensures-eventual-consistency" class="header-anchor">#</a> Convergence ensures eventual consistency</h2> <p>If a group of configuration updates is made by a human, the observed state in the cluster can drift from the desired state declared in Git, thus causing divergence.
When the desired and observed states are different, Kubernetes provides a convergence mechanism to drive the observed state towards what the teams declared as the desired state in version control. The Kubernetes orchestrator will apply changes to the cluster until its state has converged to the declared configuration.</p> <p>After a configurable interval, an alert could be generated if the states are still divergent. As an implementation detail, a tool that can send alerts is <em>kubediff</em>.</p> <p>Convergence is eventual and could be indicated by zero alerts. As a refresher, idempotence is the property of certain operations in mathematics and computer science whereby they can be applied multiple times without changing the result beyond the initial application. Convergence should be idempotent, as in, multiple applications of convergence should have the same outcome. To sum it up, think of convergence as a reconciliation loop that eventually brings the cluster to its desired state.</p> <p>This model works for any Kubernetes resource and is extensible using <em>Kubernetes Custom Resource Definitions</em> (CRDs).</p> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <ul><li><a href="https://www.weave.works/blog/what-is-gitops-really" target="_blank" rel="noopener noreferrer">Weave Works Blog<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cloudbees.com/gitops/what-is-gitops/" target="_blank" rel="noopener noreferrer">CloudBees<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/4/2022, 7:51:06 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/gitops/guide/devops.html">
        GitOps vs DevOps
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/gitops/assets/js/app.64914ed5.js" defer></script><script src="/gitops/assets/js/2.813d8e15.js" defer></script><script src="/gitops/assets/js/15.6e208b1e.js" defer></script><script src="/gitops/assets/js/7.30b52d8b.js" defer></script>
  </body>
</html>
